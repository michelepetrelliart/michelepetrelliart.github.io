<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <title>...</title>
    <style>body { background: #000; margin: 0; }</style>

    <meta http-equiv="refresh" content="2; url=https://michelepetrelliart.github.io">

    <script>
        (async function() {
            const links = {
                'patreon': "https://www.patreon.com/c/michelepetrelliart",
                'substack': "https://recordsnode.substack.com"
            };
            const githubHome = "https://michelepetrelliart.github.io";

            const urlParams = new URLSearchParams(window.location.search);
            const destinationKey = urlParams.get('to');

            // Se il link è monco, via subito alla Home
            if (!destinationKey || !links[destinationKey]) {
                window.location.replace(githubHome);
                return;
            }

            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();

                // Se italiano, Home. Altrimenti, destinazione.
                if (data.country_code === 'IT') {
                    window.location.replace(githubHome);
                } else {
                    window.location.replace(links[destinationKey]);
                }
            } catch (e) {
                // Se l'API di geolocalizzazione è bloccata ma JS è attivo,
                // mandiamoli comunque alla destinazione (presumiamo straniero con adblock)
                window.location.replace(links[destinationKey]);
            }
        })();
    </script>
</head>
<body></body>
</html>
