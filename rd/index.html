<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow">
<title>...</title>
<style>body { background: #000; margin: 0; }</style>

<meta http-equiv="refresh" content="2; url=https://michelepetrelliart.github.io/pages_static/all.html">

<script>
(function() {
    const links = {
        'patreon': "https://www.patreon.com/c/michelepetrelliart",
        'substack': "https://recordsnode.substack.com"
    };
    const githubHome = "https://michelepetrelliart.github.io/pages_static/all.html";

    const urlParams = new URLSearchParams(window.location.search);
    const destinationKey = urlParams.get('to');

    if (!destinationKey || !links[destinationKey]) {
        window.location.replace(githubHome);
        return;
    }

    // 1. Controllo Lingue
    const userLangs = navigator.languages || [navigator.language || navigator.userLanguage];
    const hasItalian = userLangs.some(lang => lang.toLowerCase().startsWith('it'));

    // 2. Controllo Fuso Orario (Italia è Europe/Rome)
    const isItalyTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone === 'Europe/Rome';

    // Se ha la lingua italiana O il fuso orario di Roma, è un utente locale
    if (hasItalian || isItalyTimezone) {
        window.location.replace(githubHome);
    } else {
        // Solo se non ha né lingua né fuso orario italiano procede
        window.location.replace(links[destinationKey]);
    }
})();
</script>
</head>
<body></body>
</html>
