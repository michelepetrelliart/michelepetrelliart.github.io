<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow">
<title>...</title>
<style>body { background: #000; margin: 0; }</style>
<noscript><meta http-equiv="refresh" content="0;url=https://michelepetrelliart.github.io/pages_static/all.html"></noscript>
<script src="//static.getclicky.com/js"></script>
<script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101499862);</script>
<script>
(function() {
    const links = {
        'patreon': "https://www.patreon.com/c/michelepetrelliart",
        'substack': "https://recordsnode.substack.com",
        'inprnt': "https://www.inprnt.com/gallery/michelepetrelli/"
    };
    const githubHome = "https://michelepetrelliart.github.io/pages_static/all.html";

    const urlParams = new URLSearchParams(window.location.search);
    const toParam = urlParams.get('to') ? urlParams.get('to').toLowerCase() : null;
    const refParam = urlParams.get('ref');

    const isItalian = (navigator.languages || [navigator.language]).some(l => l.toLowerCase().startsWith('it')) ||
                      Intl.DateTimeFormat().resolvedOptions().timeZone === 'Europe/Rome';

    let target, label;

    // Logica: se toParam Ã¨ valido, vince sempre.
    if (toParam && links[toParam]) {
        target = links[toParam];
        label = "RD_INT_" + toParam.toUpperCase();
    } else if (isItalian) {
        target = githubHome;
        label = "RD_ITALY_BOUNCE";
    } else {
        target = links['patreon'];
        label = "RD_INT_PATREON";
    }

    if (refParam) {
        label += "_" + refParam.toUpperCase();
    }

    window.onload = function() {
        const currentUrl = window.location.href;
        const fakeReferrer = refParam ? "https://" + refParam.toLowerCase() + ".com" : document.referrer;

        if (navigator.sendBeacon) {
            const beaconUrl = "https://in.getclicky.com/in.php?site_id=101499862&type=pageview&href=" +
                              encodeURIComponent(currentUrl) + "&title=" + encodeURIComponent(label) +
                              "&ref=" + encodeURIComponent(fakeReferrer);
            navigator.sendBeacon(beaconUrl);
        }

        setTimeout(function() {
            window.location.replace(target);
        }, 200);
    };
})();
</script>
</head>
<body style="background: #000;"></body>
</html>
